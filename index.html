<head>
	<title>Boolchat</title>
	<link rel="shortcut icon" href="https://www.newweb.page/assets/images/logo.png">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script>
		var boolchatWS;
		function updateTheme(){
			if(localStorage.getItem("dark")=="true"){
				$('body').attr("dark",true)
			} else {
				$('body').removeAttr("dark")
			}
		}
		function connect() {
			boolchatWS = new WebSocket('wss://logix.newweb.page/boolchat');
			boolchatWS.onmessage = function (event) {
				$("#boolchat").prop('checked',(event.data.toLowerCase()=="true"))
				$("#boolchat").attr('title', event.data);
			}
			boolchatWS.onclose = function(e) {
				console.log('Socket is closed. Reconnect will be attempted in 1 second.', e.reason);
				setTimeout(function() {
					connect();
				}, 1000);
			};
		}

		connect();

		$(document).ready(function() {
			updateTheme();
			$(document).click(function(event) { 
			  var $target = $(event.target);
			  if(!$target.closest('#clickStop').length) {
			    localStorage.setItem("dark",localStorage.getItem("dark")!="true");
			    updateTheme();
			  }        
			});
			$("#boolchat").click(function() {
			  $("#boolchat").attr('title', this.checked.toString());
			  boolchatWS.send(this.checked)
			});
		});
	</script>
	<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
	<div id="clickStop">
	<input type="checkbox" id="boolchat" title="Trualse (maybe)">
	<label id="check" for="boolchat"></label>
	</div>
</body>